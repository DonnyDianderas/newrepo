<%- include('../partials/head') %>

<main>
  <% if (messages && messages.notice) { %>
    <div class="notice"><%= messages.notice %></div>
  <% } %>

  <% if (errors && errors.length > 0) { %>
    <ul class="notice error">
      <% errors.forEach(error => { %>
        <li><%= error.msg %></li>
      <% }) %>
    </ul>
  <% } %>

  <!-- Account Update Form -->
  <section class="form-section">
    <h2>Update Account Information</h2>
    <form action="/account/update-info" method="post" novalidate>
      <input type="hidden" name="account_id" value="<%= accountData.account_id %>">

      <!-- First Name -->
      <label for="accountFirstname">First Name:</label>
      <input type="text" name="account_firstname" id="accountFirstname" required
        value="<%= accountData.account_firstname || '' %>"
        pattern="^[A-Za-z\s]{1,50}$"
        title="First name must contain only letters and spaces.">

      <!-- Last Name -->
      <label for="accountLastname">Last Name:</label>
      <input type="text" name="account_lastname" id="accountLastname" required
        value="<%= accountData.account_lastname || '' %>"
        pattern="^[A-Za-z\s]{1,50}$"
        title="Last name must contain only letters and spaces.">

      <!-- Email -->
      <label for="accountEmail">Email:</label>
      <input type="email" name="account_email" id="accountEmail" required
        value="<%= accountData.account_email || '' %>"
        pattern="^[^\s@]+@[^\s@]+\.[^\s@]+$"
        title="Enter a valid email address.">

      <input type="submit" value="Update Account" class="btn">
    </form>
  </section>

  <hr>

  <!-- Change Password Form -->
  <section class="form-section">
    <h2>Change Password</h2>
    <p>
      Enter a new password to change your current password.<br>
      Password must be at least 12 characters and include at least 1 number, 1 uppercase letter, and 1 special character.
    </p>
    <form action="/account/change-password" method="post" novalidate>
      <input type="hidden" name="account_id" value="<%= accountData.account_id %>">

      <!-- New Password -->
      <label for="accountPassword">New Password:</label>
      <input type="password" name="account_password" id="accountPassword" required
        placeholder="Enter your new password"
        pattern="^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[^a-zA-Z0-9])(?!.*\s).{12,}$"
        title="Password must be at least 12 characters and include 1 number, 1 uppercase letter, and 1 special character.">

      <input type="submit" value="Change Password" class="btn">
    </form>
  </section>
</main>


